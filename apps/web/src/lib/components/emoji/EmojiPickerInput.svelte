<script lang="ts">
	import { Button } from "flowbite-svelte";
	import type { ComponentType, SvelteComponent } from "svelte";
	import { twMerge } from "tailwind-merge";

	import EmojiImage from "./EmojiImage.svelte";
	import EmojiPicker from "./EmojiPicker.svelte";
	import type { Emoji } from "./types";

	export let init: string = "white_check_mark";
	export let additionalEmojis: Emoji[] = [];
	export let categoryIcons: Record<string, string | ComponentType<SvelteComponent>> = {};
	export let value: Emoji | null = null;

	let clazz: string | undefined = undefined;
	export { clazz as class };
</script>

<div class="relative">
	<Button
		color="none"
		{...$$restProps}
		class={twMerge("cursor-pointer p-1 hover:dark:bg-gray-700", clazz)}
	>
		{#if value}
			<EmojiImage emoji={value} class="h-6 w-6" />
		{:else}
			<svg class="h-6 w-6"></svg>
		{/if}
	</Button>
	<EmojiPicker {init} {additionalEmojis} {categoryIcons} bind:value />
</div>
